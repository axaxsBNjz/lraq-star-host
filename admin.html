<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>لوحة تحكم المسؤول - عراق ستار</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;}
body{background:#f8f9fa;color:#333;}
.dashboard{display:flex;min-height:100vh;}
.sidebar{width:250px;background:#343a40;color:#fff;display:flex;flex-direction:column;padding:20px;}
.sidebar-header{text-align:center;margin-bottom:30px;}
.sidebar-header img{max-width:120px;margin-bottom:10px;}
.sidebar-header h5{font-size:1.2em;}
.sidebar-nav{list-style:none;flex:1;}
.sidebar-nav li{margin-bottom:15px;}
.sidebar-nav a{color:#ccc;text-decoration:none;display:flex;align-items:center;gap:10px;padding:8px 10px;border-radius:5px;transition:0.3s;cursor:pointer;}
.sidebar-nav a:hover,.sidebar-nav a.active{background:#495057;color:#fff;}
.main-content{flex:1;padding:20px;}
.navbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
.navbar-user{display:flex;align-items:center;gap:10px;}
.btn-logout{background:#dc3545;color:#fff;border:none;padding:5px 10px;border-radius:5px;cursor:pointer;}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px;}
.stat-card{background:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.1);text-align:center;}
.stat-card h5{margin-bottom:10px;display:flex;align-items:center;justify-content:center;gap:5px;font-size:1.1em;}
.stat-card.primary{background:#007bff;color:#fff;}
.stat-card.success{background:#28a745;color:#fff;}
.stat-card.danger{background:#dc3545;color:#fff;}
.stat-card .number{font-size:2em;font-weight:bold;}
.card{background:#fff;border-radius:10px;margin-bottom:30px;box-shadow:0 4px 8px rgba(0,0,0,0.05);}
.card-header{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;border-bottom:1px solid #e0e0e0;font-weight:bold;font-size:1.1em;}
.card-body{padding:15px 20px;}
table{width:100%;border-collapse:collapse;}
table th,table td{text-align:right;padding:10px;border-bottom:1px solid #e0e0e0;}
.badge{padding:5px 8px;border-radius:5px;color:#fff;font-size:0.8em;}
.btn{padding:5px 10px;border:none;border-radius:5px;cursor:pointer;}
.btn-info{background:#17a2b8;color:#fff;}
.btn-warning{background:#ffc107;color:#fff;}
.btn-danger{background:#dc3545;color:#fff;}
.btn-primary{background:#007bff;color:#fff;}
.form-group{margin-bottom:15px;}
.form-label{display:block;margin-bottom:5px;}
.form-control{width:100%;padding:8px;border-radius:5px;border:1px solid #ccc;margin-bottom:10px;}
.modal{display:none;position:fixed;z-index:999;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,0.5);justify-content:center;align-items:center;}
.modal-content{background:#fff;padding:20px;border-radius:10px;width:400px;max-width:90%;position:relative;}
.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;}
.modal-close{background:none;border:none;font-size:1.5em;cursor:pointer;}
.section{display:none;}
.section.active{display:block;}
@media (max-width:768px){.dashboard{flex-direction:column;}.sidebar{width:100%;flex-direction:row;overflow-x:auto;}.sidebar-header{display:none;}.sidebar-nav{display:flex;gap:10px;}.main-content{padding:10px;}table th,table td{font-size:0.9em;padding:5px;}}
</style>
</head>
<body>
<div class="dashboard">
<div class="sidebar">
<div class="sidebar-header">
<img src="logo.png" alt="شعار عراق ستار">
<h5>لوحة المسؤول</h5>
</div>
<ul class="sidebar-nav">
<li><a class="active" onclick="showSection('overview')"><i class="bi bi-speedometer2"></i> نظرة عامة</a></li>
<li><a onclick="showSection('subscribers')"><i class="bi bi-people"></i> إدارة المشتركين</a></li>
<li><a onclick="showSection('payments')"><i class="bi bi-cash-coin"></i> إدارة الدفعات</a></li>
<li><a onclick="showSection('settings')"><i class="bi bi-gear"></i> الإعدادات</a></li>
<li><a href="index.html"><i class="bi bi-box-arrow-right"></i> خروج</a></li>
</ul>
</div>

<div class="main-content">
<div class="navbar">
<div class="navbar-brand">نظام إدارة الاستضافات</div>
<div class="navbar-user">
<span>مرحباً، المدير العام</span>
<button class="btn-logout" onclick="window.location.href='index.html'">خروج</button>
</div>
</div>

<!-- Sections -->
<div id="overview" class="section active">
<h2>نظرة عامة</h2>
<div class="stats-grid">
<div class="stat-card primary">
<h5><i class="bi bi-person-check"></i> إجمالي المشتركين</h5>
<div class="number" id="totalSubscribers">0</div>
</div>
<div class="stat-card success">
<h5><i class="bi bi-person-plus"></i> النشط</h5>
<div class="number" id="activeSubscribers">0</div>
</div>
<div class="stat-card danger">
<h5><i class="bi bi-person-x"></i> غير النشط</h5>
<div class="number" id="inactiveSubscribers">0</div>
</div>
</div>
</div>

<div id="subscribers" class="section">
<h2>إدارة المشتركين</h2>
<div class="card">
<div class="card-header">
إدارة المشتركين
<button class="btn btn-primary btn-sm" onclick="openModal('subscriberModal')">إضافة مشترك</button>
</div>
<div class="card-body">
<table id="subscribersTable">
<thead>
<tr>
<th>#</th><th>الاسم</th><th>الخدمة</th><th>الانتهاء</th><th>الحالة</th><th>الإجراءات</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>
</div>

<div id="payments" class="section">
<h2>إدارة الدفعات</h2>
<div class="card">
<div class="card-header">
إدارة الدفعات
<button class="btn btn-primary btn-sm" onclick="openModal('paymentModal')">إضافة دفعة</button>
</div>
<div class="card-body">
<table id="paymentsTable">
<thead>
<tr>
<th>#</th><th>المشترك</th><th>المبلغ</th><th>التاريخ</th><th>الطريقة</th><th>الإجراءات</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>
</div>

<div id="settings" class="section">
<h2>الإعدادات</h2>
<div class="card">
<div class="card-body">
<form id="settingsForm">
<input type="text" id="systemName" class="form-control" placeholder="اسم النظام" value="نظام إدارة مشتركي عراق ستار">
<input type="password" id="adminPass" class="form-control" placeholder="كلمة مرور المسؤول">
<button type="submit" class="btn btn-primary">حفظ الإعدادات</button>
</form>
</div>
</div>
</div>

</div>
</div>

<!-- Modals -->
<div class="modal" id="subscriberModal">
<div class="modal-content">
<div class="modal-header">
<h5>إضافة مشترك جديد</h5>
<button class="modal-close" onclick="closeModal('subscriberModal')">×</button>
</div>
<form id="subscriberForm">
<input type="text" id="subName" class="form-control" placeholder="الاسم" required>
<input type="text" id="subService" class="form-control" placeholder="الخدمة" required>
<input type="date" id="subExpiry" class="form-control" required>
<select id="subStatus" class="form-control">
<option value="نشط">نشط</option>
<option value="قريب">قريب الانتهاء</option>
<option value="غير نشط">غير نشط</option>
</select>
<button type="submit" class="btn btn-primary" style="width:100%;">إضافة</button>
</form>
</div>

<div class="modal" id="paymentModal">
<div class="modal-content">
<div class="modal-header">
<h5>إضافة دفعة جديدة</h5>
<button class="modal-close" onclick="closeModal('paymentModal')">×</button>
</div>
<form id="paymentForm">
<select id="paySubscriber" class="form-control"></select>
<input type="number" id="payAmount" class="form-control" placeholder="المبلغ" required>
<input type="date" id="payDate" class="form-control" required>
<input type="text" id="payMethod" class="form-control" placeholder="طريقة الدفع" required>
<button type="submit" class="btn btn-primary" style="width:100%;">تسجيل</button>
</form>
</div>

<script>
let subscribers=[{name:"أحمد علي", service:"استضافة متقدمة", expiry:"2025-12-01", status:"نشط"}];
let payments=[];

function showSection(id){
document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
document.querySelectorAll(".sidebar-nav a").forEach(a=>a.classList.remove("active"));
event.target.classList.add("active");
renderSubscribers(); renderPayments();
}

function renderSubscribers(){
const tbody=document.querySelector("#subscribersTable tbody");
tbody.innerHTML="";
let active=0,inactive=0;
subscribers.forEach((sub,index)=>{
if(sub.status==="نشط") active++; else if(sub.status==="غير نشط") inactive++;
let icon=sub.status==="نشط"?'<i class="bi bi-check-circle-fill" style="color:green"></i>':sub.status==="قريب"?'<i class="bi bi-exclamation-triangle-fill" style="color:#ffc107"></i>':'<i class="bi bi-x-circle-fill" style="color:red"></i>';
const tr=document.createElement("tr");
tr.innerHTML=`<td>${index+1}</td><td contenteditable="true">${sub.name}</td><td contenteditable="true">${sub.service}</td><td contenteditable="true">${sub.expiry}</td><td>${icon} ${sub.status}</td><td><button class="btn btn-danger btn-sm" onclick="deleteSubscriber(${index})"><i class="bi bi-trash"></i></button></td>`;
tbody.appendChild(tr);
});
document.getElementById("totalSubscribers").innerText=subscribers.length;
document.getElementById("activeSubscribers").innerText=active;
document.getElementById("inactiveSubscribers").innerText=inactive;
const paySelect=document.getElementById("paySubscriber");
paySelect.innerHTML="";
subscribers.forEach(sub=>{let opt=document.createElement("option");opt.value=sub.name;opt.text=sub.name;paySelect.add(opt);});
}

function deleteSubscriber(index){if(confirm("هل تريد حذف هذا المشترك؟")){subscribers.splice(index,1);renderSubscribers();}}

function renderPayments(){
const tbody=document.querySelector("#paymentsTable tbody");
tbody.innerHTML="";
payments.forEach((pay,index)=>{
const tr=document.createElement("tr");
tr.innerHTML=`<td>${index+1}</td><td>${pay.subscriber}</td><td>${pay.amount}</td><td>${pay.date}</td><td>${pay.method}</td><td><button class="btn btn-danger btn-sm" onclick="deletePayment(${index})"><i class="bi bi-trash"></i></button></td>`;
tbody.appendChild(tr);
});
}

function deletePayment(index){if(confirm("هل تريد حذف هذه الدفعة؟")){payments.splice(index,1);renderPayments();}}

function openModal(id){document.getElementById(id).style.display="flex";}
function closeModal(id){document.getElementById(id).style.display="none";}

document.getElementById("subscriberForm").addEventListener("submit",function(e){
e.preventDefault();
let name=document.getElementById("subName").value;
let service=document.getElementById("subService").value;
let expiry=document.getElementById("subExpiry").value;
let status=document.getElementById("subStatus").value;
subscribers.push({name,service,expiry,status});
renderSubscribers(); this.reset(); closeModal('subscriberModal');
});

document.getElementById("paymentForm").addEventListener("submit",function(e){
e.preventDefault();
let subscriber=document.getElementById("paySubscriber").value;
let amount=document.getElementById("payAmount").value;
let date=document.getElementById("payDate").value;
let method=document.getElementById("payMethod").value;
payments.push({subscriber,amount,date,method});
renderPayments(); this.reset(); closeModal('paymentModal');
});

document.getElementById("settingsForm").addEventListener("submit",function(e){e.preventDefault();alert("تم حفظ الإعدادات!")});

renderSubscribers(); renderPayments();
</script>
</body>
</html>
